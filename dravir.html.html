<!DOCTYPE html>
<html>
<head>
    <title>Driver Tracker</title>
</head>
<body style="text-align: center; padding-top: 50px; font-family: Arial;">
    <h2>Gari Tracking On Hai</h2>
    <p id="status">Location dhund raha hai...</p>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCWUrPm4JaKr0qDbVB_ukOSFMkSmLiYals",
            databaseURL: "https://mytrecker2-b3535-default-rtdb.firebaseio.com",
            projectId: "mytrecker2-b3535",
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // Har 5 second baad location bhejne ka function
        navigator.geolocation.watchPosition((position) => {
            const lat = position.coords.latitude;
            const lng = position.coords.longitude;
            
            // Firebase mein data save karna
            set(ref(db, 'vehicles/car_01'), {
                lat: lat,
                lng: lng,
                last_updated: new Date().getTime()
            });

            document.getElementById('status').innerHTML = "Live Location Bheji Ja Rahi Hai!<br>Lat: " + lat + "<br>Lng: " + lng;
        }, (error) => {
            console.error(error);
            document.getElementById('status').innerText = "GPS On Karen!";
        }, { enableHighAccuracy: true });
    </script>
</body>
</html>